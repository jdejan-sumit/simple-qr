<ion-header [translucent]="true" mode="ios">
  <ion-toolbar color="dark" mode="ios">
    <ion-buttons slot="start">
      <ion-back-button mode="md" defaultHref="scan" [icon]="'arrow-back'">
      </ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'RESULT' | translate }}</ion-title>
    <ion-buttons slot="end"
      *ngIf="qrCodeContent !== null && qrCodeContent !== undefined && qrCodeContent.trim().length > 0">
      <ion-button mode="md" (click)="addBookmark()" *ngIf="!bookmarked">
        <ion-icon slot="icon-only" name="star"></ion-icon>
      </ion-button>
      <ion-button mode="md" (click)="removeBookmark()" *ngIf="bookmarked">
        <ion-icon slot="icon-only" name="star" color="warning"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-row *ngIf="qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal ion-padding-top">
      <ngx-qrcode [elementType]="qrElementType" [value]="qrCodeContent" [width]="800"
        [errorCorrectionLevel]="errorCorrectionLevel" [colorDark]="qrColorDark" [colorLight]="qrColorLight"
        [margin]="qrMargin">
      </ngx-qrcode>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'QR_CODE_CONTENT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="qrCodeContent" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="base64Encoded && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BASE64_ENCODED' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="base64EncodedText" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="base64Decoded && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BASE64_DECODED' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="base64DecodedText" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row
    *ngIf="(contentType === 'phone' || contentType === 'sms') && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'PHONE_NUMBER' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="phoneNumber" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'sms' && smsContent && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'MESSAGE_CONTENT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="smsContent.length > 0? smsContent : ' '" autoGrow="true" rows="1">
        </ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && toEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_TO' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="toEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && ccEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'CC' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="ccEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && bccEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BCC' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="bccEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && emailSubject && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_SUBJECT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="emailSubject" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && emailBody && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_BODY' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="emailBody" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'contact' && qrCodeContent && qrCodeContent.trim().length > 0 && vCardContact">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'CONTACT_NAME' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="vCardContact.fullName? 
                    vCardContact.fullName : 
                    ( vCardContact.givenName &&  vCardContact.familyName ? 
                      (vCardContact.givenName + ' ' + vCardContact.familyName) : 
                        ( vCardContact.givenName ? vCardContact.givenName :
                          ( vCardContact.familyName ? vCardContact.familyName :
                            ('NOT_PROVIDED' | translate))))" rows="1">
        </ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_SSID' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="wifiSSID? wifiSSID : ( 'NOT_PROVIDED' | translate )" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'wifi' && wifiEncryption && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_ENCRYPTION' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="wifiEncryption === 'NONE'? ('NOT_AVAILABLE' | translate) : (wifiEncryption === 'WPA'? 'WPA/WPA2' : wifiEncryption)" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>
  
  <ion-row *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_HIDDEN' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="wifiHidden === true? ('YES' | translate) : ('NO' | translate)" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row class="ion-padding-horizontal ion-margin-horizontal ion-padding-bottom">
    <ion-col></ion-col>
  </ion-row>

</ion-content>

<ion-footer mode="md"
  [ngStyle]="env.colorTheme === 'dark'?  {'background-color': '#222428'} : {'background-color': 'white'}">

  <ion-row class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col></ion-col>
  </ion-row>

  <!-- URL -->
  <ion-row *ngIf="contentType === 'url'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="browseWebsite()">
        <ion-icon slot="start" name="globe-outline"></ion-icon>
        <span>{{ 'BROWSE_WEBSITE' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- Contact -->
  <ion-row *ngIf="contentType === 'contact'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="addContact()">
        <ion-icon slot="start" name="person-add-sharp"></ion-icon>
        <span>{{ 'ADD_CONTACT' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- Phone Number -->
  <ion-row *ngIf="contentType === 'phone'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="callPhone()">
        <ion-icon slot="start" name="call"></ion-icon>
        <span class="overflow: hidden; text-overflow: ellipsis;">{{ 'CALL' | translate }} {{phoneNumber}}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-row *ngIf="contentType === 'phone'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="addContact()">
        <ion-icon slot="start" name="person-add-sharp"></ion-icon>
        <span>{{ 'ADD_CONTACT' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- SMS -->
  <ion-row *ngIf="contentType === 'sms'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="sendSms()" [disabled]="!smsContent">
        <ion-icon slot="start" name="send"></ion-icon>
        <span>{{ 'SEND_MESSAGE' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-row *ngIf="contentType === 'sms'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="addContact()">
        <ion-icon slot="start" name="person-add-sharp"></ion-icon>
        <span>{{ 'ADD_CONTACT' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- Email -->
  <ion-row *ngIf="contentType === 'email'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" (click)="sendEmail()">
        <ion-icon slot="start" name="mail"></ion-icon>
        <span>{{ 'SEND_EMAIL' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- WiFi -->
  <ion-row *ngIf="contentType === 'wifi'" class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col>
      <ion-button expand="full" color="secondary" mode="ios" [disabled]="!wifiSSID" (click)="connectWifi()">
        <ion-icon slot="start" name="wifi"></ion-icon>
        <span>{{ 'CONNECT_WIFI' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>

  <!-- General -->
  <ion-row class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="webSearch()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="search"></ion-icon>
        <span>{{ 'WEB_SEARCH' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="copyText()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="copy"></ion-icon>
        <span>{{ 'COPY_TEXT' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-row class="ion-padding-horizontal ion-margin-horizontal ion-padding-bottom">
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="base64()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="code-working"></ion-icon>
        <span>{{ 'BASE64' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="shareQrCode()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="share-social"></ion-icon>
        <span>{{ 'SHARE_QRCODE' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>