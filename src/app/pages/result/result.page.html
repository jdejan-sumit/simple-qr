<ion-header>
  <ion-toolbar [color]="env.colorTheme === 'black'? 'black' : 'dark'">
    <ion-title>{{ 'RESULT' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="ion-padding-horizontal ion-margin-horizontal ion-padding-top">
  </div>

  <ion-row class="ion-padding-horizontal pb-3" [@inOutAnimation]>
    <ion-col>
      <ion-badge class="p-2" color="primary">
        <div class="d-flex align-items-center">
          <mat-icon *ngIf="contentTypeIcon != ''" style="margin-right: 16px;">
            {{ contentTypeIcon }}
          </mat-icon>
          <span>{{ contentTypeText }}</span>
        </div>
      </ion-badge>
    </ion-col>
  </ion-row>

  <ng-container *ngIf="qrCodeContent && qrCodeContent.trim().length > 0" [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: barcodeFormat + ('CONTENT' | translate), content: qrCodeContent, hint: env.resultFormat }">
  </ng-container>

  <ng-container *ngIf="base64Encoded && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'BASE64_ENCODED' | translate, content: base64EncodedText }">
  </ng-container>

  <ng-container *ngIf="base64Decoded && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'BASE64_DECODED' | translate, content: base64DecodedText }">
  </ng-container>

  <ng-container
    *ngIf="(contentType === 'phone' || contentType === 'sms') && qrCodeContent && qrCodeContent.trim().length > 0 && phoneNumber && phoneNumber.length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'PHONE_NUMBER' | translate, content: phoneNumber }">
  </ng-container>

  <ng-container *ngIf="contentType === 'sms' && smsContent && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'MESSAGE_CONTENT' | translate, content: smsContent?.length > 0? smsContent : ' ' }">
  </ng-container>

  <ng-container
    *ngIf="(contentType === 'emailW3C' || contentType === 'emailDocomo') && toEmails && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock" [ngTemplateOutletContext]="{ label: 'EMAIL_TO' | translate, content: toEmails }">
  </ng-container>

  <ng-container *ngIf="contentType === 'emailW3C' && ccEmails && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock" [ngTemplateOutletContext]="{ label: 'CC' | translate, content: ccEmails }">
  </ng-container>

  <ng-container *ngIf="contentType === 'emailW3C' && bccEmails && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock" [ngTemplateOutletContext]="{ label: 'BCC' | translate, content: bccEmails }">
  </ng-container>

  <ng-container
    *ngIf="(contentType === 'emailW3C' || contentType === 'emailDocomo') && emailSubject && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'EMAIL_SUBJECT' | translate, content: emailSubject }">
  </ng-container>

  <ng-container
    *ngIf="(contentType === 'emailW3C' || contentType === 'emailDocomo') && emailBody && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'EMAIL_BODY' | translate, content: emailBody }">
  </ng-container>

  <ng-container *ngIf="contentType === 'contact' && qrCodeContent && qrCodeContent.trim().length > 0 && vCardContact"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'CONTACT_NAME' | translate, content: finalContactName }">
  </ng-container>

  <ng-container *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'WIFI_SSID' | translate, content: wifiSSID? wifiSSID : ( 'NOT_PROVIDED' | translate ) }">
  </ng-container>

  <ng-container *ngIf="contentType === 'wifi' && wifiEncryption && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'WIFI_ENCRYPTION' | translate, content: wifiEncryption === 'NONE'? ('NOT_AVAILABLE' | translate) : (wifiEncryption === 'WPA'? 'WPA/WPA2' : wifiEncryption) }">
  </ng-container>

  <ng-container *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0"
    [ngTemplateOutlet]="contentBlock"
    [ngTemplateOutletContext]="{ label: 'WIFI_HIDDEN' | translate, content: wifiHidden === true? ('YES' | translate) : ('NO' | translate) }">
  </ng-container>

  <div class="ion-padding-horizontal ion-margin-horizontal ion-padding-bottom">
  </div>

</ion-content>

<ion-footer
  [ngStyle]="env.colorTheme === 'dark'?  {'background-color': '#222428'} : (env.colorTheme === 'black'? {'background-color': '#000000'} : {'background-color': '#F0F0F0'})">

  <ion-row *ngIf="contentType === 'url'" class="d-flex justify-content-center">
    <ion-button (click)="tapHaptic(); browseWebsite()" [color]="'primary'" fill="clear">
      <ion-icon name="globe"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row *ngIf="contentType === 'contact'" class="d-flex justify-content-center">
    <ion-button (click)="tapHaptic(); addContact()" [color]="'primary'" fill="clear">
      <ion-icon name="person-add-sharp"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row *ngIf="contentType === 'phone'" class="d-flex justify-content-around">
    <ion-button (click)="tapHaptic(); addContact()" [color]="'primary'" fill="clear">
      <ion-icon name="person-add-sharp"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); callPhone()" [color]="'primary'" fill="clear">
      <ion-icon name="call"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row *ngIf="smsContent && contentType === 'sms'" class="d-flex justify-content-around">
    <ion-button (click)="tapHaptic(); addContact()" [color]="'primary'" fill="clear">
      <ion-icon name="person-add-sharp"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); sendSms()" [color]="'primary'" fill="clear">
      <ion-icon name="send"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row *ngIf="!smsContent && contentType === 'sms'" class="d-flex justify-content-center">
    <ion-button (click)="tapHaptic(); addContact()" [color]="'primary'" fill="clear">
      <ion-icon name="person-add-sharp"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row *ngIf="contentType === 'emailW3C' || contentType === 'emailDocomo'" class="d-flex justify-content-center">
    <ion-button (click)="tapHaptic(); sendEmail()" [color]="'primary'" fill="clear">
      <ion-icon name="mail"></ion-icon>
    </ion-button>
  </ion-row>

  <ion-row class="ion-padding-horizontal justify-content-between">
    <!-- General -->
    <ion-button (click)="tapHaptic(); webSearch()" [color]="env.colorTheme === 'light'? 'dark' : 'light'"
      fill="clear" [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon *ngIf="env.searchEngine === 'google'" slot="icon-only" name="logo-google">
      </ion-icon>
      <ion-icon *ngIf="env.searchEngine === 'bing'" slot="icon-only" src="assets/icon/microsoft-bing.svg">
      </ion-icon>
      <ion-icon *ngIf="env.searchEngine === 'yahoo'" slot="icon-only" src="assets/icon/yahoo.svg">
      </ion-icon>
      <ion-icon *ngIf="env.searchEngine === 'duckduckgo'" slot="icon-only" src="assets/icon/duck-duck-go.svg">
      </ion-icon>
      <ion-icon *ngIf="env.searchEngine === 'yandex'" slot="icon-only" src="assets/icon/yandex.svg">
      </ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); copyText()" [color]="env.colorTheme === 'light'? 'dark' : 'light'"
      fill="clear" [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="copy"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); base64()" [color]="env.colorTheme === 'light'? 'dark' : 'light'"
      fill="clear" [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="code-working"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); enlarge()" [color]="env.colorTheme === 'light'? 'dark' : 'light'"
      fill="clear" [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="qr-code-sharp"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); addBookmark()" *ngIf="!bookmarked"
      [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="star"></ion-icon>
    </ion-button>
    <ion-button (click)="tapHaptic(); removeBookmark()" *ngIf="bookmarked" [color]="'warning'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="star"></ion-icon>
    </ion-button>
  </ion-row>
</ion-footer>

<ng-template #contentBlock let-label="label" let-content="content" let-hint="hint">
  <ion-row class="ion-padding-horizontal" [@inOutAnimation]>
    <ion-col>
      <mat-form-field [class]="ngMatThemeClass" appearance="outline" color="accent" [floatLabel]="'always'"
        style="width: 100%;">
        <mat-label>{{ label }}</mat-label>
        <textarea matInput [value]="content" [cdkTextareaAutosize]="true" [cdkAutosizeMinRows]="1"
          [cdkAutosizeMaxRows]="10" readonly>
        </textarea>
        <mat-hint *ngIf="hint && hint != ''" style="opacity: 0.5;">{{ hint }}</mat-hint>
      </mat-form-field>
    </ion-col>
  </ion-row>
</ng-template>