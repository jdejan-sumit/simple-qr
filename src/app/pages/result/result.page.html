<ion-header [translucent]="true" mode="ios">
  <ion-toolbar color="dark" mode="ios">
    <!-- <ion-buttons slot="start">
      <ion-back-button mode="md" defaultHref="scan" [icon]="'arrow-back'">
      </ion-back-button>
    </ion-buttons> -->
    <ion-title>{{ 'RESULT' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-row *ngIf="qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal ion-padding-top">
      <ngx-qrcode [elementType]="qrElementType" [value]="qrCodeContent" [width]="800"
        [errorCorrectionLevel]="errorCorrectionLevel" [colorDark]="qrColorDark" [colorLight]="qrColorLight"
        [margin]="qrMargin">
      </ngx-qrcode>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BARCODE_CONTENT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="qrCodeContent" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="base64Encoded && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BASE64_ENCODED' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="base64EncodedText" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="base64Decoded && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BASE64_DECODED' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="base64DecodedText" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row
    *ngIf="(contentType === 'phone' || contentType === 'sms') && qrCodeContent && qrCodeContent.trim().length > 0 && phoneNumber && phoneNumber.length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'PHONE_NUMBER' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="phoneNumber" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'sms' && smsContent && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'MESSAGE_CONTENT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="smsContent?.length > 0? smsContent : ' '" autoGrow="true" rows="1">
        </ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && toEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_TO' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="toEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && ccEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'CC' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="ccEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && bccEmails && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'BCC' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="bccEmails" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && emailSubject && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_SUBJECT' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="emailSubject" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'email' && emailBody && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'EMAIL_BODY' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="emailBody" autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'contact' && qrCodeContent && qrCodeContent.trim().length > 0 && vCardContact">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'CONTACT_NAME' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="vCardContact.fullName? 
                    vCardContact.fullName : 
                    ( vCardContact.givenName &&  vCardContact.familyName ? 
                      (vCardContact.givenName + ' ' + vCardContact.familyName) : 
                        ( vCardContact.givenName ? vCardContact.givenName :
                          ( vCardContact.familyName ? vCardContact.familyName :
                            ('NOT_PROVIDED' | translate))))" rows="1">
        </ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_SSID' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="wifiSSID? wifiSSID : ( 'NOT_PROVIDED' | translate )" autoGrow="true"
          rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'wifi' && wifiEncryption && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_ENCRYPTION' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly
          [value]="wifiEncryption === 'NONE'? ('NOT_AVAILABLE' | translate) : (wifiEncryption === 'WPA'? 'WPA/WPA2' : wifiEncryption)"
          autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row *ngIf="contentType === 'wifi' && qrCodeContent && qrCodeContent.trim().length > 0">
    <ion-col class="ion-text-center ion-padding-horizontal">
      <ion-item lines="none">
        <ion-label class="content-label ion-padding-start ion-padding-bottom"
          [color]="env.colorTheme === 'dark'? 'light' : 'dark'" position="floating">
          {{ 'WIFI_HIDDEN' | translate }}
        </ion-label>
        <ion-textarea class="box" readonly [value]="wifiHidden === true? ('YES' | translate) : ('NO' | translate)"
          autoGrow="true" rows="1"></ion-textarea>
      </ion-item>
    </ion-col>
  </ion-row>

  <ion-row class="ion-padding-horizontal ion-margin-horizontal ion-padding-bottom">
    <ion-col></ion-col>
  </ion-row>

  <ion-fab *ngIf="contentType !== 'freeText' && contentType !== 'wifi'" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="primary" (click)="openActionSheet()">
      <ion-icon name="menu"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>

<ion-footer mode="ios"
  [ngStyle]="env.colorTheme === 'dark'?  {'background-color': '#222428'} : {'background-color': '#F0F0F0'}">

  <ion-row class="ion-padding-horizontal justify-content-between">
    <!-- General -->
    <ion-button mode="md" (click)="webSearch()" [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" src="assets/icon/search-web.svg"></ion-icon>
    </ion-button>
    <ion-button mode="md" (click)="copyText()" [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="copy"></ion-icon>
    </ion-button>
    <ion-button mode="md" (click)="base64()" [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="code-working"></ion-icon>
    </ion-button>
    <ion-button mode="md" (click)="shareQrCode()" [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="share-social"></ion-icon>
    </ion-button>
    <ion-button mode="md" (click)="addBookmark()" *ngIf="!bookmarked"
      [color]="env.colorTheme === 'light'? 'dark' : 'light'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="star"></ion-icon>
    </ion-button>
    <ion-button mode="md" (click)="removeBookmark()" *ngIf="bookmarked" [color]="'warning'" fill="clear"
      [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
      <ion-icon slot="icon-only" name="star"></ion-icon>
    </ion-button>
  </ion-row>
  <!-- <ion-row class="ion-padding-horizontal ion-margin-horizontal">
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="webSearch()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" src="assets/icon/search-web.svg"></ion-icon>
        <span>{{ 'WEB_SEARCH' | translate }}</span>
        <ion-icon class="external-link-icon" src="assets/icon/external-link.svg">
        </ion-icon>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="copyText()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="copy"></ion-icon>
        <span>{{ 'COPY_TEXT' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row>
  <ion-row class="ion-padding-horizontal ion-margin-horizontal ion-padding-bottom">
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="base64()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="code-working"></ion-icon>
        <span>{{ 'BASE64' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="full" color="primary" mode="ios" (click)="shareQrCode()"
        [disabled]="!qrCodeContent || (qrCodeContent && qrCodeContent.trim().length <= 0)">
        <ion-icon slot="start" name="share-social"></ion-icon>
        <span>{{ 'SHARE_QRCODE' | translate }}</span>
        <ion-ripple-effect></ion-ripple-effect>
      </ion-button>
    </ion-col>
  </ion-row> -->
</ion-footer>